<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entry Module - 317 Formula Trading System</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 50%, #0a1a2a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }

        h1 {
            text-align: center;
            font-size: 2.5em;
            background: linear-gradient(90deg, #00ff88, #00aaff, #ff00aa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #888;
            font-size: 1.2em;
            margin-bottom: 30px;
        }

        /* Main Flow Diagram */
        .flow-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        .flow-box {
            background: linear-gradient(145deg, #1a2a3a, #0a1a2a);
            border: 2px solid #00aaff;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 0 20px rgba(0, 170, 255, 0.3);
        }
        .flow-box.input { border-color: #00ff88; box-shadow: 0 0 20px rgba(0, 255, 136, 0.3); }
        .flow-box.process { border-color: #ffaa00; box-shadow: 0 0 20px rgba(255, 170, 0, 0.3); }
        .flow-box.output { border-color: #ff00aa; box-shadow: 0 0 20px rgba(255, 0, 170, 0.3); }
        .flow-box h3 { font-size: 1.1em; margin-bottom: 8px; }
        .flow-box .count { font-size: 2em; font-weight: bold; }
        .flow-arrow {
            font-size: 2em;
            color: #00aaff;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Formula Categories Grid */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        .category-card {
            background: linear-gradient(145deg, #1a2a3a, #0f1f2f);
            border-radius: 15px;
            padding: 20px;
            border-left: 4px solid;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        .category-card.bayesian { border-color: #ff6b6b; }
        .category-card.timeseries { border-color: #4ecdc4; }
        .category-card.ml { border-color: #45b7d1; }
        .category-card.microstructure { border-color: #96ceb4; }
        .category-card.hmm { border-color: #dfe6e9; }
        .category-card.signal { border-color: #fdcb6e; }
        .category-card.hft { border-color: #e17055; }
        .category-card.crypto { border-color: #f39c12; }
        .category-card.advml { border-color: #9b59b6; }
        .category-card.nextgen { border-color: #1abc9c; }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .category-title { font-size: 1.2em; font-weight: bold; }
        .category-count {
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        .category-ids {
            font-family: 'Courier New', monospace;
            font-size: 0.75em;
            color: #888;
            line-height: 1.6;
            max-height: 80px;
            overflow-y: auto;
        }
        .category-research {
            margin-top: 10px;
            font-size: 0.85em;
            color: #aaa;
            font-style: italic;
        }

        /* Aggregation Section */
        .aggregation-section {
            background: linear-gradient(145deg, #1a2a4a, #0a1a3a);
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            border: 2px solid #00aaff;
        }
        .aggregation-title {
            text-align: center;
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #00aaff;
        }
        .aggregation-flow {
            display: flex;
            align-items: center;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }
        .agg-step {
            background: rgba(0, 170, 255, 0.1);
            border: 1px solid #00aaff;
            border-radius: 10px;
            padding: 15px 20px;
            text-align: center;
        }
        .agg-step h4 { color: #00aaff; margin-bottom: 5px; }
        .agg-step code {
            font-family: 'Courier New', monospace;
            color: #00ff88;
            font-size: 0.9em;
        }

        /* Entry Decision */
        .decision-box {
            background: linear-gradient(145deg, #2a1a3a, #1a0a2a);
            border: 3px solid #ff00aa;
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            text-align: center;
        }
        .decision-title {
            font-size: 1.8em;
            color: #ff00aa;
            margin-bottom: 20px;
        }
        .decision-conditions {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        .condition {
            background: rgba(255, 0, 170, 0.1);
            border: 1px solid #ff00aa;
            border-radius: 10px;
            padding: 20px;
            min-width: 200px;
        }
        .condition h4 { color: #ff00aa; margin-bottom: 10px; }
        .condition .value { font-size: 2em; font-weight: bold; color: #fff; }
        .condition .label { color: #888; font-size: 0.9em; }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: linear-gradient(90deg, rgba(0, 255, 136, 0.1), rgba(0, 170, 255, 0.1), rgba(255, 0, 170, 0.1));
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 15px;
        }
        .stat-item { text-align: center; }
        .stat-value { font-size: 2em; font-weight: bold; color: #00ff88; }
        .stat-label { color: #888; font-size: 0.9em; }

        /* Formula ID Visualization */
        .formula-viz {
            background: #0a0a1a;
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
        }
        .formula-viz-title {
            text-align: center;
            margin-bottom: 15px;
            color: #888;
        }
        .formula-dots {
            display: flex;
            flex-wrap: wrap;
            gap: 3px;
            justify-content: center;
        }
        .formula-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            transition: transform 0.2s;
        }
        .formula-dot:hover { transform: scale(2); }
        .formula-dot.bayesian { background: #ff6b6b; }
        .formula-dot.timeseries { background: #4ecdc4; }
        .formula-dot.ml { background: #45b7d1; }
        .formula-dot.microstructure { background: #96ceb4; }
        .formula-dot.hmm { background: #dfe6e9; }
        .formula-dot.signal { background: #fdcb6e; }
        .formula-dot.hft { background: #e17055; }
        .formula-dot.crypto { background: #f39c12; }
        .formula-dot.advml { background: #9b59b6; }
        .formula-dot.nextgen { background: #1abc9c; }

        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8em;
        }
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            border-top: 1px solid #333;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ENTRY MODULE</h1>
        <p class="subtitle">317 Formulas for Signal Generation | $10 to $300,000 System</p>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-value">317</div>
                <div class="stat-label">Total Formulas</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">10</div>
                <div class="stat-label">Categories</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">>0.3</div>
                <div class="stat-label">Signal Threshold</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">>0.4</div>
                <div class="stat-label">Confidence Required</div>
            </div>
        </div>

        <!-- Main Data Flow -->
        <div class="flow-container">
            <div class="flow-box input">
                <h3>BLOCKCHAIN DATA</h3>
                <div class="count">10+</div>
                <small>WebSocket Feeds</small>
            </div>
            <div class="flow-arrow">&#8594;</div>
            <div class="flow-box">
                <h3>PRICE ENGINE</h3>
                <div class="count">$BTC</div>
                <small>Derived Price</small>
            </div>
            <div class="flow-arrow">&#8594;</div>
            <div class="flow-box process">
                <h3>317 FORMULAS</h3>
                <div class="count">&#8734;</div>
                <small>Parallel Processing</small>
            </div>
            <div class="flow-arrow">&#8594;</div>
            <div class="flow-box">
                <h3>CONDORCET VOTE</h3>
                <div class="count">&#8721;</div>
                <small>Signal Aggregation</small>
            </div>
            <div class="flow-arrow">&#8594;</div>
            <div class="flow-box output">
                <h3>ENTRY DECISION</h3>
                <div class="count">GO</div>
                <small>LONG or SHORT</small>
            </div>
        </div>

        <!-- Formula Categories -->
        <h2 style="text-align: center; margin: 40px 0 20px; color: #00aaff;">Formula Categories</h2>
        <div class="categories-grid">
            <div class="category-card bayesian">
                <div class="category-header">
                    <span class="category-title">Bayesian/Statistical</span>
                    <span class="category-count">30 formulas</span>
                </div>
                <div class="category-ids">IDs: 1-4, 6-11, 13-25, 27-30</div>
                <div class="category-research">Probability inference, prior updates, posterior distributions</div>
            </div>

            <div class="category-card timeseries">
                <div class="category-header">
                    <span class="category-title">Time Series Models</span>
                    <span class="category-count">30 formulas</span>
                </div>
                <div class="category-ids">IDs: 31-51, 53, 55-58, 60</div>
                <div class="category-research">ARIMA, GARCH, state-space, spectral analysis</div>
            </div>

            <div class="category-card ml">
                <div class="category-header">
                    <span class="category-title">Machine Learning</span>
                    <span class="category-count">40 formulas</span>
                </div>
                <div class="category-ids">IDs: 61-100, 104-107</div>
                <div class="category-research">Neural networks, ensemble methods, online learning</div>
            </div>

            <div class="category-card microstructure">
                <div class="category-header">
                    <span class="category-title">Microstructure</span>
                    <span class="category-count">25 formulas</span>
                </div>
                <div class="category-ids">IDs: 111-114, 121-130, 134, 137, 142, 145, 149-160, 162</div>
                <div class="category-research">Kyle (1985), Order flow, tick analysis, OFI</div>
            </div>

            <div class="category-card hmm">
                <div class="category-header">
                    <span class="category-title">HMM/State Detection</span>
                    <span class="category-count">13 formulas</span>
                </div>
                <div class="category-ids">IDs: 171-180, 183, 185-187</div>
                <div class="category-research">Baum-Welch (1972), hidden states, regime transitions</div>
            </div>

            <div class="category-card signal">
                <div class="category-header">
                    <span class="category-title">Signal Processing</span>
                    <span class="category-count">20 formulas</span>
                </div>
                <div class="category-ids">IDs: 191-194, 197-205, 209-210, 214-215, 221-222</div>
                <div class="category-research">Kalman filter, wavelet transform, FFT, denoising</div>
            </div>

            <div class="category-card hft">
                <div class="category-header">
                    <span class="category-title">HFT Indicators</span>
                    <span class="category-count">30 formulas</span>
                </div>
                <div class="category-ids">IDs: 239-241, 243, 245-246, 248-249, 251-268</div>
                <div class="category-research">VPIN (Easley 2012), toxicity, informed flow</div>
            </div>

            <div class="category-card crypto">
                <div class="category-header">
                    <span class="category-title">Crypto-Specific</span>
                    <span class="category-count">40 formulas</span>
                </div>
                <div class="category-ids">IDs: 269-276, 282, 284-287, 291-307, 311-313, 324, 332, 336-339</div>
                <div class="category-research">On-chain metrics, whale tracking, exchange flows</div>
            </div>

            <div class="category-card advml">
                <div class="category-header">
                    <span class="category-title">Advanced ML</span>
                    <span class="category-count">60 formulas</span>
                </div>
                <div class="category-ids">IDs: 341-355, 357-361, 364-373, 375-380, 389-420, 422-423, 425-426, 432-435</div>
                <div class="category-research">Deep learning, attention, transformers, meta-learning</div>
            </div>

            <div class="category-card nextgen">
                <div class="category-header">
                    <span class="category-title">Next-Gen Research</span>
                    <span class="category-count">15 formulas</span>
                </div>
                <div class="category-ids">IDs: 446-453, 461-462, 464-466, 476-481</div>
                <div class="category-research">Cutting-edge: rough vol, signature methods, quantum</div>
            </div>
        </div>

        <!-- Formula Visualization -->
        <div class="formula-viz">
            <div class="formula-viz-title">All 317 Entry Formulas (each dot = 1 formula)</div>
            <div class="formula-dots" id="formulaDots"></div>
            <div class="legend">
                <div class="legend-item"><div class="legend-dot" style="background: #ff6b6b;"></div>Bayesian</div>
                <div class="legend-item"><div class="legend-dot" style="background: #4ecdc4;"></div>Time Series</div>
                <div class="legend-item"><div class="legend-dot" style="background: #45b7d1;"></div>ML</div>
                <div class="legend-item"><div class="legend-dot" style="background: #96ceb4;"></div>Microstructure</div>
                <div class="legend-item"><div class="legend-dot" style="background: #dfe6e9;"></div>HMM</div>
                <div class="legend-item"><div class="legend-dot" style="background: #fdcb6e;"></div>Signal</div>
                <div class="legend-item"><div class="legend-dot" style="background: #e17055;"></div>HFT</div>
                <div class="legend-item"><div class="legend-dot" style="background: #f39c12;"></div>Crypto</div>
                <div class="legend-item"><div class="legend-dot" style="background: #9b59b6;"></div>Adv ML</div>
                <div class="legend-item"><div class="legend-dot" style="background: #1abc9c;"></div>Next-Gen</div>
            </div>
        </div>

        <!-- Aggregation Section -->
        <div class="aggregation-section">
            <div class="aggregation-title">Signal Aggregation: Condorcet Voting</div>
            <div class="aggregation-flow">
                <div class="agg-step">
                    <h4>Step 1: Collect</h4>
                    <code>signal, conf = formula.get_signal()</code>
                </div>
                <div class="flow-arrow">&#8594;</div>
                <div class="agg-step">
                    <h4>Step 2: Filter</h4>
                    <code>if conf > 0.3: count()</code>
                </div>
                <div class="flow-arrow">&#8594;</div>
                <div class="agg-step">
                    <h4>Step 3: Vote</h4>
                    <code>bullish vs bearish</code>
                </div>
                <div class="flow-arrow">&#8594;</div>
                <div class="agg-step">
                    <h4>Step 4: Normalize</h4>
                    <code>(bull - bear) / total</code>
                </div>
            </div>
        </div>

        <!-- Entry Decision -->
        <div class="decision-box">
            <div class="decision-title">ENTRY DECISION</div>
            <div class="decision-conditions">
                <div class="condition">
                    <h4>Signal Strength</h4>
                    <div class="value">&gt; 0.30</div>
                    <div class="label">30% formula majority</div>
                </div>
                <div class="condition">
                    <h4>Confidence</h4>
                    <div class="value">&gt; 0.40</div>
                    <div class="label">40% average certainty</div>
                </div>
                <div class="condition">
                    <h4>Risk Check</h4>
                    <div class="value">PASS</div>
                    <div class="label">21 risk formulas agree</div>
                </div>
                <div class="condition">
                    <h4>Result</h4>
                    <div class="value" style="color: #00ff88;">ENTER</div>
                    <div class="label">LONG or SHORT</div>
                </div>
            </div>
        </div>

        <!-- Position Sizing -->
        <div style="background: linear-gradient(145deg, #1a3a2a, #0a2a1a); border: 2px solid #00ff88; border-radius: 15px; padding: 20px; margin: 30px 0; text-align: center;">
            <h3 style="color: #00ff88; margin-bottom: 15px;">Position Sizing (Kelly Criterion)</h3>
            <div style="font-family: 'Courier New', monospace; font-size: 1.2em; color: #fff;">
                size = capital * kelly_fraction * confidence
            </div>
            <div style="margin-top: 15px; color: #888;">
                <span style="background: rgba(0,255,136,0.2); padding: 5px 10px; border-radius: 5px; margin: 5px;">Half-Kelly</span>
                <span style="background: rgba(0,255,136,0.2); padding: 5px 10px; border-radius: 5px; margin: 5px;">5-30% Range</span>
                <span style="background: rgba(0,255,136,0.2); padding: 5px 10px; border-radius: 5px; margin: 5px;">34 Sizing Formulas</span>
            </div>
        </div>

        <div class="footer">
            <p>Entry Module | Part of 433-Formula Trading System</p>
            <p style="margin-top: 10px;">Research: Kelly (1956) | Kyle (1985) | Easley et al. (2012) | Gatheral (2014)</p>
        </div>
    </div>

    <script>
        // Generate formula dots
        const formulaIds = [
            1, 2, 3, 4, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22,
            23, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41,
            42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 53, 55, 56, 57, 58, 60, 61, 62,
            63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80,
            81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98,
            99, 100, 104, 105, 106, 107, 111, 112, 113, 114, 121, 122, 123, 124, 125,
            126, 127, 128, 129, 130, 134, 137, 142, 145, 149, 150, 151, 152, 153, 154,
            155, 156, 157, 158, 159, 160, 162, 171, 172, 173, 174, 175, 176, 177, 178,
            179, 180, 183, 185, 186, 187, 191, 192, 193, 194, 197, 198, 199, 200, 201,
            202, 203, 204, 205, 209, 210, 214, 215, 221, 222, 239, 240, 241, 243, 245,
            246, 248, 249, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262,
            263, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 282, 284,
            285, 286, 287, 291, 292, 293, 294, 295, 296, 297, 299, 300, 301, 302, 303,
            304, 305, 306, 307, 311, 312, 313, 324, 332, 336, 337, 338, 339, 341, 342,
            343, 344, 347, 348, 349, 350, 351, 352, 353, 354, 355, 357, 358, 359, 360,
            361, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 375, 376, 377, 378,
            379, 380, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 402,
            403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417,
            418, 419, 420, 422, 423, 425, 426, 432, 433, 434, 435, 446, 447, 448, 449,
            450, 451, 452, 453, 461, 462, 464, 465, 466, 476, 477, 478, 479, 480, 481
        ];

        function getCategory(id) {
            if (id <= 30) return 'bayesian';
            if (id <= 60) return 'timeseries';
            if (id <= 110) return 'ml';
            if (id <= 170) return 'microstructure';
            if (id <= 190) return 'hmm';
            if (id <= 238) return 'signal';
            if (id <= 268) return 'hft';
            if (id <= 340) return 'crypto';
            if (id <= 440) return 'advml';
            return 'nextgen';
        }

        const dotsContainer = document.getElementById('formulaDots');
        formulaIds.forEach(id => {
            const dot = document.createElement('div');
            dot.className = `formula-dot ${getCategory(id)}`;
            dot.title = `Formula #${id}`;
            dotsContainer.appendChild(dot);
        });
    </script>
</body>
</html>
